/***************************************
* @license
* Built December 02, 17 23:37:02
* Version: 0.1.9
* Minor version: jssdk-rc-0.1.8.151
***************************************/
("undefined"!=typeof _aurycDefine?_aurycDefine:define)(["require","_auryc","aurycConfig",_aurycNormalizeUrl("core/userty.utils.js")],function(e,t,aurycConfig,o){function n(e,t){var o=e.match(new RegExp(t+"=([^&]*)"));return o?o[1]:null}function i(e,t){var o=document.createElement("script");o.type="text/javascript",o.charset="UTF-8",o.src=e,t&&(o.onload=t);var n=document.getElementsByTagName("script");n.length>0?n[0].parentNode.insertBefore(o,n[0]):document.head.appendChild(o)}function r(e,t){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.charset="UTF-8",o.href=e,t&&(o.onload=t),document.head.appendChild(o)}function a(e){r("//visualeditor.auryc.com/editor.css"),i("//visualeditor.auryc.com/editor.js",function(){window.aurycLoadEditor(e)})}function c(e){if(Boolean.toString().indexOf("[native code]")<0){var t=document.createElement("iframe");document.documentElement.appendChild(t),window.Boolean=t.contentWindow.Boolean,document.documentElement.removeChild(t)}var n={siteId:o.getConfig("siteid"),siteToken:o.getConfig("siteToken"),storage:e,timeZone:e.get("_aurycTimeZone"),utils:o};a(n)}function d(e,t){if(!e||!t)return!1;var n=o.getConfig("siteid"),i=o.getConfig("siteToken");return e===n&&t===i}var s="_aurychash";t.domReady(function(){try{var e=o.StorageFactory.getInstance(o.SYMBOLS.SESSION),t=window.location.hash;if(t&&"editor"===n(t,"mode")){var i=window.history.length;history.replaceState("",document.title,window.location.pathname+window.location.search);var r,a,u,l=n(t,"t"),m=o.base64url.decodeBase64(l||"");if(!m)return void console.log("siteId or siteToken does not exist");if(a=n(m,"siteId"),u=n(m,"siteToken"),r=n(m,"timeZone"),!d(a,u))return void console.log("siteId or siteToken does not match");r&&e.setSession("_aurycTimeZone",r);var f=n(t,"mode");e.setSession(s,f),e.setSession("timeTraveling",i),e.setSession("_aurycMode","edit"),c(e)}else"editor"===e.get(s)&&c(e)}catch(g){}})});